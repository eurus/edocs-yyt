---
layout: page
title: "硬件相关"
category: faq
date: 2014-04-04 14:01:20
order: 3
---

### 凭条打印机加载失败

* 首先用NB2000确保硬件可以正确使用，然后开始排查
* 可能开了两个IE，加载冲突
* 如果html测试页面正常，web程序中失败，应该是其他驱动占了打印机端口，用监听工具检测，看调用打印机之前是否有串口输入
* 通常程序是在appload加载打印机的，检查这段代码是否有异常，可以和已上线版本对比

### 凭条未打印

* 最常见的原因为凭条机无纸或卡纸
* 组凭条内容异常

### 密码键盘按键无效

* 检查连线，密码键盘有一个ps2接口（圆孔，旧键盘插口，插在有键盘标识的孔）和一个串口。通常工作状态下按键有响声
* 打开txt文本，如果按键有数字输出，证明键盘上电正常
* 有时主板cmos重新上电可以恢复键盘状态，请联系办事处检查

### 密码键盘重新签到

* 用串口调试助手往键盘串口发相关命令，检查密钥（适用2.0以下监控版本）
* 确保模式正确（工行版、浦发版或普通版），详询办事处或银行
* 硬件问题，监控串口排查

### 密码键盘算pinblock为空（未完成）

* 检查c盘相关配置，通常是pin.ini和pos.ini,详询驱动提供人员，有时候配置里面是空白

### 工行8583包交易报密码错
* 通常就是密码错，或者环境问题导致卡号在系统里不存在，详询银行测试环境是否和总行配套。

### 磁卡机检验是否有卡不管用（附赠IE闪退）

* 驱动的bug。通常做法是不管有卡没卡，在程序出口处加退卡函数，建议先关闭磁卡机，然后打开卡机、退卡，可以避免IE闪退问题。

### 注册ocx相关

* 注册失败，检查是否有相关的dll和配置，版本是否正确；重启机器重新注册尝试；
以管理员身份运行命令行尝试（详情可google百度之）
* 注册后html测试页面调用不成功：
尽量先使用国光的nb2000排查硬件问题，若正常，查看d盘ocx，是否有该硬件相关配置，正确与否。——偶有磁卡机和发卡机classid相同的情况，请关注！

小贴士：ocx注册成功可以在注册表查到，运行regedit查找ocx文件的前缀，找到则表示已注册，可以进一步查看classid值。

### 条码枪经常性失灵

常见于单线串口条码枪。有的com口本身不稳定，请联系办事处更换物理com口，相应更改配置。

多线条码枪通常是反射接收器角度问题。有的多线条码枪是com口的，需要com转输入驱动，请确保驱动版本、配置正确。

### 触摸屏失灵：

排除程序死机的情况，通常是积灰过多或者硬件损坏，请联系办事处排查。

### 磁卡刷卡器读不到特殊符号(待补充)

Com转输入驱动问题，现在正联系袁总改驱动。

### 发卡机读到卡号为空

应该是卡放反了，需要尽量在代码处理这种情况。

### 现金模块不能使用(待补充)

红灯闪烁，一般为硬件问题，比如硬币堵住入钞口

红灯亮，表示已经有电，如果一直不变绿，考虑是端口配置问题

